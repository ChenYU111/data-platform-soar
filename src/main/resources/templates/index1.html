<html>
<head>
    <title>Index</title>
</head>
<script src="/jquery.js"></script>
<!-- stomp协议的客户端脚本 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.js"></script>
<!-- SockJS的客户端脚本 -->
<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
<body onload="disconnect()">
<div>
    <div>
        <button id="connect" onclick="connect();">连接</button>
        <button id="disconnect" disabled="disabled" onclick="disconnect();">断开连接</button>
    </div>
    <div id="conversationDiv">
        <label>输入sql:</label><input type="text" id="sql" name="sql"/>
        <button id="sendSql" onclick="sendSql();">发送</button>
        <p id="response"></p>
    </div>
</div>

<script type="text/javascript">
    var ws = new WebSocket("ws://localhost:8080/myHandler");
    ws.onmessage = function (message) {
        console.log(message.data);
        showResponse(message.data);
    }
    function sendSql() {
        var sql = $('#sql').val();
        ws.send(sql);
    }

    function showResponse(message) {
        var response = $("#response");
        console.log(response)
        response.html(message + "\r\n");
    }
</script>
</body>
</html>
